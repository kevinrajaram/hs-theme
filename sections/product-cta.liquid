{%- liquid
    assign current_variant = product.selected_or_first_available_variant
    assign heading = product.metafields.sf_cta_block.heading
    assign description = product.metafields.sf_cta_block.description
    assign product_image = product.metafields.sf_cta_block.product_image
    assign item_image_1 = product.metafields.sf_cta_block.item_1_image
    assign item_text_1 = product.metafields.sf_cta_block.item_1_text
    assign item_image_2 = product.metafields.sf_cta_block.item_2_image
    assign item_text_2 = product.metafields.sf_cta_block.item_2_text
    assign item_image_3 = product.metafields.sf_cta_block.item_3_image
    assign item_text_3 = product.metafields.sf_cta_block.item_3_text
    assign item_image_4 = product.metafields.sf_cta_block.item_4_image
    assign item_text_4 = product.metafields.sf_cta_block.item_4_text
    assign item_image_5 = product.metafields.sf_cta_block.item_5_image
    assign item_text_5 = product.metafields.sf_cta_block.item_5_text
    assign item_image_6 = product.metafields.sf_cta_block.item_6_image
    assign item_text_6 = product.metafields.sf_cta_block.item_6_text
    assign item_image_7 = product.metafields.sf_cta_block.item_7_image
    assign item_text_7 = product.metafields.sf_cta_block.item_7_text
    assign sold_out = true
    if current_variant.available
        assign sold_out = false
    endif
-%}

<div class="wayfx-wrapper">
    {% if template == 'product.hp-vip' or template == 'product.hp-new' %}
    <svg class="desktop-only head-icon" xmlns="http://www.w3.org/2000/svg" width="74" height="74" fill="none" viewBox="0 0 74 74"><path fill="#2D231A" d="M37.0001 0C24.9088 0 14.1549 5.82543 7.39985 14.8213V8.32502c.0111-.75064-.28236-1.47353-.81377-2.00356-.53072-.53072-1.2543-.82348-2.00425-.81168-1.53111.02428-2.7535 1.28413-2.73199 2.81524V21.2746c.00069 1.5325 1.24251 2.775 2.775 2.775H17.5751c1.0011.0146 1.9314-.5113 2.4365-1.3757.5043-.8644.5043-1.9335 0-2.7979-.5051-.8644-1.4354-1.3903-2.4365-1.3764h-6.0127c5.7151-7.847 14.9649-12.94959 25.4377-12.94959 17.4014 0 31.4499 14.04849 31.4499 31.44989 0 17.4013-14.0485 31.4498-31.4499 31.4498-17.4013 0-31.44979-14.0485-31.44979-31.4498.01387-1.0011-.51199-1.9314-1.37641-2.4365-.86441-.5044-1.93348-.5044-2.7979 0-.86441.5051-1.3902737 1.4354-1.37570495 2.4365C.00029505 57.401 16.599 73.9997 37.0001 73.9997 57.4013 73.9997 74 57.401 74 36.9999 74 16.5987 57.4013 0 37.0001 0ZM26.8249 25.4371c-3.0733 0-5.3121 1.6574-6.5324 3.176-1.2203 1.5193-1.6913 3.0858-1.6913 3.0858-.2609.7957-.0715 1.6706.496 2.2873.5668.616 1.4229.8776 2.2373.6833.8152-.1942 1.4611-.813 1.6893-1.6192 0 0 .2373-.7458.8749-1.5387.6368-.7937 1.4048-1.4493 2.9262-1.4493 1.2869 0 1.937.4031 2.4392.9789.5023.5765.7985 1.4389.7985 2.2589 0 1.5547-.3357 1.973-.9684 2.4968-.6321.5231-1.8163.9983-3.2662 1.5061-1.45.5085-3.167 1.0552-4.7009 2.3525-1.5339 1.298-2.6272 3.4806-2.6272 6.1321.0007 1.2772 1.0357 2.3123 2.3129 2.3123h12.0248c.8339.0118 1.6095-.4267 2.03-1.1468.4204-.7201.4204-1.6109 0-2.3317-.4205-.7201-1.1961-1.1586-2.03-1.1468h-8.8342c.0631-.0589.0375-.2296.1082-.2886.6341-.5362 1.8073-1.0128 3.2482-1.5179 1.4409-.505 3.1475-1.0378 4.6828-2.3088 1.536-1.2709 2.6453-3.4375 2.6453-6.0592 0-1.8551-.6029-3.7671-1.937-5.2975-1.3341-1.5297-3.4583-2.5655-5.926-2.5655Zm14.3378.4627c-1.2765 0-2.3123 1.0358-2.3123 2.3123v10.1753c0 1.2765 1.0358 2.3122 2.3123 2.3122h7.8622v5.088c0 1.2765 1.0365 2.3123 2.313 2.3123 1.2765 0 2.3123-1.0358 2.3123-2.3123V28.2121c0-1.2765-1.0358-2.3123-2.3123-2.3123s-2.313 1.0358-2.313 2.3123v7.863h-5.55v-7.863c0-1.2765-1.0357-2.3123-2.3122-2.3123Z"/></svg>
    {% endif %}
    <h2 class="desktop-only">{{ heading }}</h2>
    <p class="desktop-only">{{ description }}</p>

    <div class="wayfx-grid">
        <div class="wayfx-grid__item">
            {% if template == 'product.hp-vip' or template == 'product.hp-new' %}
            <img class="lazyload product-image" data-src="{{ 'hp-benefits.png' | asset_img_url: '1176x' }}" alt="{{ product.title }}" width="588" />
            {% else %}
            <img class="lazyload product-image" data-src="{{ product_image }}" alt="{{ product.title }}" />
            {% endif %}

            <h2 class="mobile-only">{{ heading }}</h2>
            <p class="mobile-only">{{ description }}</p>
        </div>

        <div class="wayfx-grid__item">
            <div class="wayfx-product__cta-benefits">
                <ul class="wayfx-list-nostyle">
                    {%- if item_text_1 -%}
                        <li class="wayfx-product__cta-benefit">
                            {%- if item_image_1 -%}<div class="icon"><img data-src="{{ item_image_1 }}" alt="" class="lazyload" /></div>{%- endif -%}
                            <div class="benefit">{{ item_text_1 }}</div>
                        </li>
                    {%- endif -%}
                    {%- if item_text_2 -%}
                        <li class="wayfx-product__cta-benefit">
                            {%- if item_image_2 -%}<div class="icon"><img data-src="{{ item_image_2 }}" alt="" class="lazyload" /></div>{%- endif -%}
                            <div class="benefit">{{ item_text_2 }}</div>
                        </li>
                    {%- endif -%}
                    {%- if item_text_3 -%}
                        <li class="wayfx-product__cta-benefit">
                            {%- if item_image_3 -%}<div class="icon"><img data-src="{{ item_image_3 }}" alt="" class="lazyload" /></div>{%- endif -%}
                            <div class="benefit">{{ item_text_3 }}</div>
                        </li>
                    {%- endif -%}
                    {%- if item_text_4 -%}
                        <li class="wayfx-product__cta-benefit">
                            {%- if item_image_4 -%}<div class="icon"><img data-src="{{ item_image_4 }}" alt="" class="lazyload" /></div>{%- endif -%}
                            <div class="benefit">{{ item_text_4 }}</div>
                        </li>
                    {%- endif -%}
                    {%- if item_text_5 -%}
                        <li class="wayfx-product__cta-benefit">
                            {%- if item_image_5 -%}<div class="icon"><img data-src="{{ item_image_5 }}" alt="" class="lazyload" /></div>{%- endif -%}
                            <div class="benefit">{{ item_text_5 }}</div>
                        </li>
                    {%- endif -%}
                    {%- if item_text_6 -%}
                        <li class="wayfx-product__cta-benefit">
                            {%- if item_image_6 -%}<div class="icon"><img data-src="{{ item_image_6 }}" alt="" class="lazyload" /></div>{%- endif -%}
                            <div class="benefit">{{ item_text_6 }}</div>
                        </li>
                    {%- endif -%}
                    {%- if item_text_7 -%}
                        <li class="wayfx-product__cta-benefit">
                            {%- if item_image_7 -%}<div class="icon"><img data-src="{{ item_image_7 }}" alt="" class="lazyload" /></div>{%- endif -%}
                            <div class="benefit">{{ item_text_7 }}</div>
                        </li>
                    {%- endif -%}
                </ul>
              {% unless sold_out %}
              {% unless product.tags contains 'growaov-oos' %}
                <form action="/cart/add" method="post" enctype="multipart/form-data" class="GrowAOV-Form">
                    <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" />
                    <input type="hidden" name="selling_plan" value="{{ product.selected_or_first_available_variant.selling_plan_allocations[0].selling_plan.id }}" />
                    <button type="submit" class="wayfx-btn" role="button" aria-label="Subscribe">Subscribe</button>
                </form>
              {% endunless %}
              {% endunless %}
            </div>
        </div>
    </div>
</div>

{%- if item_text_1 == blank -%}
    <style type="text/css">.wayfx-product__cta {display: none;}</style>
{%- endif -%}

<style>
  @media screen and (max-width: 600px){
    .wayfx-product__cta .wayfx-product__cta-benefits .wayfx-btn{
      display: flex;
      margin-inline: auto;
    }
  }
</style>
{% schema %}
    {
        "name": "Product CTA",
        "tag": "section",
        "class": "wayfx-product__cta"
    }
{% endschema %}
